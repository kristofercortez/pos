function addToCart(t,a,i,e){var r=Math.round((new Date).getTime()+100*Math.random()),n='<tr class="row_prod_'+r+'">';n+='<input type="hidden" name="product_id[]" class="product_id" value="'+r+'" >',n+='<input type="hidden" name="min_price[]" class="min_price" value="'+i+'" >',n+='<input type="hidden" name="srp[]" class="srp" value="'+a+'" >',n+='<input type="hidden" name="product_amt[]" class="product_amt" value="'+a+'" >',n+='<td><input type="text" style="font-size: 10px !important;" value="'+t+'" readonly="true" class="form-control item_name"></td>',n+='<td><input type="text" style="font-size: 10px !important;" name="display_price[]" class="form-control display_price" readonly="true" value="'+a+'"></td>',n+='<td ><a href="javascript:void(0)" class="btn btn-xs default red remove_row"><i class="fa fa-times" aria-hidden="true"></i></a><a href="javascript:void(0)" class="btn btn-xs default green indiv_adj"><i class="fa fa-pencil" aria-hidden="true"></i></a></td>',n+="</tr>",$("#cart_items").prepend(n),hideItemAdjustment(),$(".checkout_btn").is(":visible")&&$(".bulk_adj").is(":hidden")&&1!=$("#reg_trans_flag").val()?appendPerItemFields():computeCart(),computeCartMinimum()}function ajaxGetVAT(){var t="http://erp.cilanthropist.co/inventory/pos/get/vat";$.getJSON(t,function(t){$("#session_vat").val(t)})}function computeExtraAmount(){var t=parseInt($("#cart_min_price").val()),a=parseInt($("#cart_int_price").val()),i=a-t,e=addDashes(i.toString());$("#cart_min_pricex").text(addCommas(t.toString())),$("#cart_pricex").text(addCommas(a.toString())),$("#ea_amt").text(e)}function hideItemAdjustment(){$(".indiv_adj").each(function(){$(this).hide()})}function showItemAdjustment(){$(".indiv_adj").each(function(){$(this).show()})}function addCommas(t){t+="",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function addDashes(t){t+="",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1-$2");return x1+x2}function appendPerItemColumns(){$("#cart_table").find("tr").each(function(){$(this).find("th").eq(1).after("<th>Discount Type</th>")}),$("#cart_table").find("tr").each(function(){$(this).find("th").eq(2).after("<th>Value</th>")}),$("#cart_table").find("tr").each(function(){$(this).find("th").eq(3).after("<th>Adjusted Price</th>")});var t=$("th"),a=t.eq(0);a.width(170);var i=t.eq(1);i.width(75);var i=t.eq(3);i.width(75);var i=t.eq(4);i.width(75)}function hideBulkAmounts(){$("#cform-discount_amount").val(""),$("#cgroup-discount_amount").hide(),$("#cform-discount_pct").val(""),$("#cgroup-discount_pct").hide(),$("#cform-new_total").val(""),$("#cgroup-new_total").hide()}function cancelBulkAdjustment(){revertOriginalPrices(),$("#cgroup-new_total").hide(),$("#cform-new_total").val(""),$("#cform-discount_amount").val(""),$("#cgroup-discount_amount").hide(),$("#cform-discount_pct").val(""),$("#cgroup-discount_pct").hide(),$(".display_price").each(function(){if("0"==$(this).val()||0==$(this).val()){var t=$(this).closest("tr"),a=t.find(".srp").val();$(this).val(a)}})}function hideCartLastColumn(){$("td:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","none")}),$("th:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","none")})}function showCartLastColumn(){"td:last-child".each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","")}),$("th:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","")})}function applyIndividualAdjustment(){var t=$("#cform-indiv_adj").val();if(""!=t){var a=$("#item_adjustment_prod_id").val(),i=$("#cart_table > tbody > tr.row_prod_"+a),e=i.find(".srp").val();if("gift"==t)i.find(".display_price").val("0.00");else if("40p"==t){var r=.4*e;i.find(".display_price").val(r)}else"chg"==t?i.find(".display_price").val($("#cform-new_price").val()):i.find(".display_price").val(e)}}function apply_indiv(t){var a=$(t).closest("tr"),i=a.find(".srp").val(),e=a.find(".adjusted_price"),r=a.find(".per_item_discount_amt");"gift"==$(t).val()?(e.val(0),r.attr("readonly",!0),r.val("")):"disc"==$(t).val()?(e.val(i),r.val(""),r.attr("readonly",!1)):"chg"==$(t).val()?(e.val(i),r.val(""),r.attr("readonly",!1)):(e.val(i),r.attr("readonly",!0),r.val("")),computeCart(),computeCartMinimum()}function proceedToTransaction(t){var a=t;""!=a?"reg"==a?($(".next_step_btn").hide(),$(".checkout_btn").show(),$("#transaction_type_modal").modal("hide"),$(".savings_h4").hide(),$(".clear_discount").show(),$("#reg_trans_flag").val(1)):"per"==a?($("#reg_trans_flag").val(0),$(".next_step_btn").hide(),$(".savings_h4").show(),$(".checkout_btn").show(),appendPerItemColumns(),appendPerItemFields(),$("#transaction_type_modal").modal("hide"),$(".orig_totals_row").show(),$(".orig_price_h3").show(),$(".clear_discount").show()):"bulk"==a?($(".next_step_btn").hide(),$("#reg_trans_flag").val(0),$(".savings_h4").show(),$(".bulk_adj").show(),$("#proc").show(),$("#transaction_type_modal").modal("hide"),$("#bulk_adjustment").modal("show"),$(".bulk_discount_h4").show(),$(".checkout_btn").show(),$(".orig_totals_row").show(),$(".orig_price_h3").show(),$(".clear_discount").show()):($(".clear_discount").hide(),$("#reg_trans_flag").val(0)):($(".clear_discount").hide(),$("#reg_trans_flag").val(0))}function revertDiscounts(){$("#cart_table").find("tr").each(function(){$(this).children("th").length>5&&($(this).find("th").eq(2).remove(),$(this).find("th").eq(2).remove(),$(this).find("th").eq(2).remove()),$(this).children("td").length>5&&($(this).find("td").eq(2).remove(),$(this).find("td").eq(2).remove(),$(this).find("td").eq(2).remove())}),$(".cart_price_h3").css({color:"black"}),$("#cgroup-new_total").hide(),$("#cform-new_total").val(""),$("#cform-discount_amount").val(""),$("#cgroup-discount_amount").hide(),$("#cform-discount_pct").val(""),$("#cgroup-discount_pct").hide(),$("#cart_price").text(addCommas($("#cart_int_orig_price").val())),$("#cart_int_price").val($("#cart_int_orig_price").val()),computeCartMinimum(),$(".orig_totals_row").hide(),$(".orig_price_h3").hide(),$(".bulk_discount_h4").hide(),$("#applied_bulk_discount").val(""),$(".checkout_btn").hide(),$(".bulk_adj").hide(),$(".next_step_btn").show(),$(".clear_discount").hide()}function applyBulkAdjustment(){var t=$("#cform-bulk_adj").val();if(""!=t)if("bgift"==t)$("#cart_price").text(0),$("#cart_int_price").val(0),$("#applied_bulk_discount").text("Gift");else if("bdiscamt"==t){var a=$("#cart_int_orig_price").val()-$("#cform-discount_amount").val();a>=0?($("#cart_price").text(addCommas(a)),$("#cart_int_price").val(a),$("#applied_bulk_discount").text("Less Php "+$("#cform-discount_amount").val())):toastr.error("Invalid discount amount.","Error")}else if("bdisc"==t){var a=$("#cart_int_orig_price").val()-$("#cart_int_orig_price").val()*($("#cform-discount_pct").val()/100);a>=0?($("#cart_price").text(addCommas(a)),$("#cart_int_price").val(a),$("#applied_bulk_discount").text("Less "+$("#cform-discount_pct").val()+"% off")):toastr.error("Invalid discount.","Error")}else"bamt"==t?($("#cart_int_price").val($("#cform-new_total").val()),$("#cart_price").text(addCommas($("#cform-new_total").val())),$("#applied_bulk_discount").text("Change Amount")):($(".display_price").each(function(){if("0"==$(this).val()||"0.00"==$(this).val()){var t=$(this).closest("tr"),a=t.find(".srp").val();$(this).val(a)}}),$("#applied_bulk_discount").text(""),computeCart(),computeCartMinimum());var i=parseInt($("#session_vat").val())/100,e=$("#cart_int_price").val(),r=(e/1.12).toFixed(2),n=(r*i).toFixed(2);$("#cart_new_amt_vat").text(addCommas(r.toString())),$("#cart_new_vat").text(addCommas(n.toString())),$("#cart_int_price").val(e)}function revertOriginalPrices(){$(".display_price").each(function(){if("0"==$(this).val()||0==$(this).val()){var t=$(this).closest("tr"),a=t.find(".srp").val();$(this).val(a)}}),computeCart(),computeCartMinimum()}