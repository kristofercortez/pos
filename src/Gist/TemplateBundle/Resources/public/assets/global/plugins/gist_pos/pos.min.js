function addToCart(t,a,i,e){var n=Math.round((new Date).getTime()+100*Math.random()),r='<tr class="row_prod_'+n+'">';r+='<input type="hidden" name="product_id[]" class="product_id" value="'+n+'" >',r+='<input type="hidden" name="min_price[]" class="min_price" value="'+i+'" >',r+='<input type="hidden" name="srp[]" class="srp" value="'+a+'" >',r+='<input type="hidden" name="product_amt[]" class="product_amt" value="'+a+'" >',r+='<td><input type="text" style="font-size: 10px !important;" value="'+t+'" readonly="true" class="form-control item_name"></td>',r+='<td><input type="text" style="font-size: 10px !important;" name="display_price[]" class="form-control display_price" readonly="true" value="'+a+'"></td>',r+='<td ><a href="javascript:void(0)" class="btn btn-xs default red remove_row"><i class="fa fa-times" aria-hidden="true"></i></a><a href="javascript:void(0)" class="btn btn-xs default green indiv_adj"><i class="fa fa-pencil" aria-hidden="true"></i></a></td>',r+="</tr>",$("#cart_items").prepend(r),hideItemAdjustment(),$(".checkout_btn").is(":visible")&&$(".bulk_adj").is(":hidden")&&1!=$("#reg_trans_flag").val()?appendPerItemFields():computeCart(),computeCartMinimum()}function ajaxGetProductCategories(){$("#prod_cats").empty(),$("#prods").empty(),$("#prod_cats").append('<div style="height: 10px;">');var t="http://erp.cilanthropist.co/inventory/pos/get/product_categories";$.getJSON(t,function(t){$.each(t,function(t,a){var i="http://nahmdong.com/vitalhill/img/default.png";null!=a.image_url&&(i=a.image_url),$("#prod_cats").append('<button class="btn btn-md btn-block category_btn" id="cat_btn_'+a.id+'" onclick="ajaxGetProducts('+a.id+')" style="background-color: #556E93; color: #ffffff; border-radius: 5px !important;">'+a.name+"</button>"),$("#prods").append('<div class="col-md-6" style="margin: 0px !important; padding: 1px !important" >                    <a href="javascript:void(0)" class="category_btn2" style="text-decoration: none;" onclick="ajaxGetProducts('+a.id+')">                    <div class="thumbnail" style="margin: 0px !important;border-width: 1px !important; border-color: #7e88ff !important; border-radius: 5px !important;">                        <img src='+i+' style="height: 150px; width: 80%; display: block;">                        <div class="caption" style="font-size: 12px !important; text-overflow: ellipsis !important; white-space: nowrap; overflow: hidden;">                            <h3 style="font-size: 12px !important; margin: 0!important; text-overflow: ellipsis !important; white-space: nowrap; overflow: hidden;">'+a.name+"</h3>                        </div>                    </div>                    </a>                </div>")})})}function ajaxGetVAT(){var t="http://erp.cilanthropist.co/inventory/pos/get/vat";$.getJSON(t,function(t){$("#session_vat").val(t)})}function ajaxGetProducts(t){$("#prods").empty(),$("#prods").append('<div class="col-md-12"><h2>&nbsp;&nbsp;&nbsp;Loading products...</h2></div>'),$("#cat_btn_"+t).css({"background-color":"#484c50"}),$("#prods").empty();var a="http://erp.cilanthropist.co/inventory/pos/get/products/"+t;$.getJSON(a,function(t){var a=0;$.each(t,function(t,i){a++;var e=0;null!=i.srp&&(e=i.srp);var n="http://nahmdong.com/vitalhill/img/default.png";null!=i.image_url&&(n=i.image_url),$("#prods").append('<div class="col-md-6" style="margin: 0px !important; padding: 2px !important" >                    <a href="javascript:void(0)" style="text-decoration: none;" onclick="addToCart(\''+i.name+"',"+e+","+i.min_price+","+i.id+')">                    <div class="thumbnail" style="margin: 0px !important; border-width: 1px !important; border-color: #7e88ff !important; border-radius: 5px !important;">                        <img src='+n+' style="height: 150px; width: 80%; display: block;">                        <div class="caption" style="font-size: 12px !important; text-overflow: ellipsis !important; white-space: nowrap; overflow: hidden;">                            <h3 style="font-size: 12px !important; margin: 0!important; text-overflow: ellipsis !important; white-space: nowrap; overflow: hidden;">'+i.name+'</h3>                            <h3 style="font-size: 12px !important; margin: 0!important;"><b>PHP '+e+"</b></h3>                        </div>                    </div>                    </a>                </div>")}),0==a&&($("#prods").empty(),$("#prods").append('<div class="col-md-12"><h2>&nbsp;&nbsp;No products in selected category</h2></div>'))})}function computeExtraAmount(){var t=parseInt($("#cart_min_price").val()),a=parseInt($("#cart_int_price").val()),i=a-t,e=addDashes(i.toString());$("#cart_min_pricex").text(addCommas(t.toString())),$("#cart_pricex").text(addCommas(a.toString())),$("#ea_amt").text(e)}function hideItemAdjustment(){$(".indiv_adj").each(function(){$(this).hide()})}function showItemAdjustment(){$(".indiv_adj").each(function(){$(this).show()})}function addCommas(t){t+="",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function addDashes(t){t+="",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1-$2");return x1+x2}function appendPerItemColumns(){$("#cart_table").find("tr").each(function(){$(this).find("th").eq(1).after("<th>Discount Type</th>")}),$("#cart_table").find("tr").each(function(){$(this).find("th").eq(2).after("<th>Value</th>")}),$("#cart_table").find("tr").each(function(){$(this).find("th").eq(3).after("<th>Adjusted Price</th>")});var t=$("th"),a=t.eq(0);a.width(170);var i=t.eq(1);i.width(75);var i=t.eq(3);i.width(75);var i=t.eq(4);i.width(75)}function appendPerItemFields(){$(".checkout_btn").is(":visible")&&1!=$("#reg_trans_flag").val()&&$("#cart_table").find("tr").each(function(){if($(this).children("td").length<6){$(this).find("td").eq(1).after("<td style=\"font-size: 10px !important;\">                    {{ form.group_select_only3('Type', 'indiv_disc_opt', indiv_options, '', 12, 12, false)|e('js') }}</td>"),$(this).find("td").eq(2).after('<td style="font-size: 10px !important;">                    <input type="text" style="font-size: 10px !important;" class="form-control per_item_discount_amt" readonly="true" value=""></td>'),$(this).find("td").eq(3).after('<td><input type="text" style="font-size: 10px !important;" class="form-control adjusted_price" readonly="true" value="0.00"></td>');var t=$(this).find(".srp").val(),a=$(this).find(".adjusted_price");a.val(t),computeCart()}})}function hideBulkAmounts(){$("#cform-discount_amount").val(""),$("#cgroup-discount_amount").hide(),$("#cform-discount_pct").val(""),$("#cgroup-discount_pct").hide(),$("#cform-new_total").val(""),$("#cgroup-new_total").hide()}function cancelBulkAdjustment(){revertOriginalPrices(),$("#cgroup-new_total").hide(),$("#cform-new_total").val(""),$("#cform-discount_amount").val(""),$("#cgroup-discount_amount").hide(),$("#cform-discount_pct").val(""),$("#cgroup-discount_pct").hide(),$(".display_price").each(function(){if("0"==$(this).val()||0==$(this).val()){var t=$(this).closest("tr"),a=t.find(".srp").val();$(this).val(a)}})}function hideCartLastColumn(){$("td:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","none")}),$("th:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","none")})}function showCartLastColumn(){"td:last-child".each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","")}),$("th:last-child").each(function(){"cart_table"==$(this).closest("table").attr("id")&&$(this).css("display","")})}function applyIndividualAdjustment(){var t=$("#cform-indiv_adj").val();if(""!=t){var a=$("#item_adjustment_prod_id").val(),i=$("#cart_table > tbody > tr.row_prod_"+a),e=i.find(".srp").val();if("gift"==t)i.find(".display_price").val("0.00");else if("40p"==t){var n=.4*e;i.find(".display_price").val(n)}else"chg"==t?i.find(".display_price").val($("#cform-new_price").val()):i.find(".display_price").val(e)}}function apply_indiv(t){var a=$(t).closest("tr"),i=a.find(".srp").val(),e=a.find(".adjusted_price"),n=a.find(".per_item_discount_amt");"gift"==$(t).val()?(e.val(0),n.attr("readonly",!0),n.val("")):"disc"==$(t).val()?(e.val(i),n.val(""),n.attr("readonly",!1)):"chg"==$(t).val()?(e.val(i),n.val(""),n.attr("readonly",!1)):(e.val(i),n.attr("readonly",!0),n.val("")),computeCart(),computeCartMinimum()}